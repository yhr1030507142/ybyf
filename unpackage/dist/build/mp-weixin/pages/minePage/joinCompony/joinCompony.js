(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/minePage/joinCompony/joinCompony"],{"1f54":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(e("a34a"));function a(n){return n&&n.__esModule?n:{default:n}}var i=function(){return e.e("node-modules/_@dcloudio_uni-ui@0.0.8@@dcloudio/uni-ui/lib/uni-collapse-item/uni-collapse-item").then(e.bind(null,"870e"))},r=function(){return e.e("node-modules/_@dcloudio_uni-ui@0.0.8@@dcloudio/uni-ui/lib/uni-collapse/uni-collapse").then(e.bind(null,"8f63"))};function u(n,t,e,o,a,i,r){try{var u=n[i](r),s=u.value}catch(c){return void e(c)}u.done?t(s):Promise.resolve(s).then(o,a)}function s(n){return function(){var t=this,e=arguments;return new Promise(function(o,a){var i=n.apply(t,e);function r(n){u(i,o,a,r,s,"next",n)}function s(n){u(i,o,a,r,s,"throw",n)}r(void 0)})}}var c={data:function(){return{array:[],array1:[],index:"",selectValue:"",imageList:[],Id:"",pathArr:[],listPath:[],name:"",tel:""}},onLoad:function(){var n=this;n.getComPonyInfo()},methods:{bindPickerChange:function(n){console.log("picker发送选择改变，携带值为",n.target.value),this.index=n.target.value,this.Id=this.array1[this.index],console.log(this.Id)},previewImage:function(t){var e=t.target.dataset.src;n.previewImage({current:e,urls:this.imageList})},chooseImage:function(){var t=s(o.default.mark(function t(){var e,a,i=this;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,9!==this.imageList.length){t.next=8;break}return t.next=4,this.isFullImg();case 4:if(a=t.sent,console.log("是否继续?",a),a){t.next=8;break}return t.abrupt("return");case 8:n.chooseImage({success:function(t){console.log(t),console.log(JSON.stringify(t.tempFilePaths));var o=t.tempFilePaths;i.imageList=i.imageList.concat(t.tempFilePaths),n.uploadFile({url:e.$api+"dockingManager/upload",filePath:o[0],name:"file",formData:{user:"test"},success:function(n){e.pathArr=e.pathArr.concat(JSON.parse(n.data)),console.log(e.pathArr),console.log(n)}})}});case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isFullImg:function(){var t=this;return new Promise(function(e){n.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(n){n.confirm?(t.imageList=[],e(!0)):e(!1)},fail:function(){e(!1)}})})},getComPonyInfo:function(){var t=this;n.request({url:t.$api+"dockingManager/cardLower",success:function(n){for(var e=[],o=[],a=0;a<n.data.length;a++)e[a]=n.data[a].trade,o[a]=n.data[a].id;t.array=e,t.array1=o,console.log(n),console.log(e)}})},addInfo:function(){var t=this;if(""==t.compony_name)return n.showToast({title:"企业名称不能为空",icon:"none"}),!1;if(""==t.name)return n.showToast({title:"法人姓名不能为空",icon:"none"}),!1;if(""==t.compony_num)return n.showToast({title:"企业注册号不能为空",icon:"none"}),!1;if(0===t.imageList.length)return n.showToast({title:"请上传企业照片",icon:"none"}),!1;for(var e=0;e<t.pathArr.length;e++)t.listPath.push({testName1:t.pathArr[e]}),console.log(t.listPath);t.listPath.push({name:t.name,phone:t.tel,optionId:n.getStorageSync("openId"),store:1,upperId:t.Id}),n.request({url:t.$api+"dockingManager/cardAdd",data:JSON.stringify(t.listPath),method:"POST",success:function(t){return console.log(t),1==t.data?(n.showToast({title:"提交成功",duration:"2000",success:function(){n.switchTab({url:"../pages/mine/mine"})}}),!1):99==t.data?(n.showToast({title:"您尚未进行登录，请登录后重试",icon:"none"}),!1):void 0}})}},components:{uniCollapse:r,uniCollapseItem:i}};t.default=c}).call(this,e("543d")["default"])},"43cf":function(n,t,e){"use strict";var o=function(){var n=this,t=n.$createElement;n._self._c},a=[];e.d(t,"a",function(){return o}),e.d(t,"b",function(){return a})},"4ee3":function(n,t,e){},a0a6:function(n,t,e){"use strict";var o=e("4ee3"),a=e.n(o);a.a},a94b:function(n,t,e){"use strict";e.r(t);var o=e("1f54"),a=e.n(o);for(var i in o)"default"!==i&&function(n){e.d(t,n,function(){return o[n]})}(i);t["default"]=a.a},f460:function(n,t,e){"use strict";e.r(t);var o=e("43cf"),a=e("a94b");for(var i in a)"default"!==i&&function(n){e.d(t,n,function(){return a[n]})}(i);e("a0a6");var r=e("2877"),u=Object(r["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=u.exports}},[["2e07","common/runtime","common/vendor"]]]);